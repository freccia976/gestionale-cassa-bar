<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Gestionale Cassa Bar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
  <!-- ICONA PER iOS (Home Screen) -->
<link rel="apple-touch-icon" href="img/logo.png">

<!-- (opzionale ma consigliato) -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

</head>
<body>

<!-- ================= LOGIN ================= -->
<section class="card" id="login-box">
  <h2>Accesso</h2>
  <input type="email" id="login-email" placeholder="Email">
  <input type="password" id="login-password" placeholder="Password">
  <button id="btn-login">ğŸ” Entra</button>
</section>

<!-- ================= APP ================= -->
<div id="app" class="hidden">

<!-- ================= POPUP DETTAGLIO SETTIMANA ================= -->
<div id="popup-dettaglio" class="popup hidden">
  <div class="popup-content prima-nota">

    <header class="popup-header">
      <h2>Prima Nota Settimanale <span id="popup-periodo"></span></h2>
      <button id="chiudi-popup" type="button">âœ–</button>

    </header>

    <div class="prima-nota-header">
      <div class="col-entrate">ENTRATE</div>
      <div class="col-uscite">USCITE</div>
    </div>

    <div class="prima-nota-body">
      <div id="col-entrate" class="prima-nota-col"></div>
      <div id="col-uscite" class="prima-nota-col"></div>
    </div>

    <div class="prima-nota-footer">
      <div>ğŸ’¶ Totale Contanti: <strong id="tot-contanti-pn">0.00</strong> â‚¬</div>
      <div>ğŸ’³ Totale POS: <strong id="tot-pos-pn">0.00</strong> â‚¬</div>
      <div>ğŸ“¤ Totale Uscite: <strong id="tot-uscite-pn">0.00</strong> â‚¬</div>
      <div class="saldo">
        ğŸ’° Saldo Contanti:
        <strong id="saldo-contanti-pn">0.00</strong> â‚¬
      </div>
    </div>

  </div>
</div>

<!-- ================= POPUP CHIUSURA CASSA ================= -->
<div id="popup-chiusura-cassa" class="popup hidden">
  <div class="popup-content">

    <header class="popup-header">
      <h2>Chiusura Cassa Settimanale</h2>
      <button id="chiudi-chiusura-cassa">âœ–</button>
    </header>

    <div class="pn-row">
      <label>Contanti effettivi in cassa (â‚¬)</label>
      <input
  type="number"
  id="cc-contanti-effettivi"
  step="0.01"
  readonly
>

    </div>

    <div class="pn-row doppio">
  <label>Versamento in banca (â‚¬)</label>

  <div class="pn-inline">
    <input type="number" id="cc-versamento" step="0.01">
    <input type="number" id="cc-bonus-versamento" step="0.01" placeholder="+ bonus">
  </div>
</div>


    <div class="pn-row doppio">
  <label>Compenso Lorenzo(â‚¬)</label>

  <div class="pn-inline">
    <input type="number" id="cc-lorenzo" step="0.01">
    <input type="number" id="cc-bonus-lorenzo" step="0.01" placeholder="+ bonus">
  </div>
</div>


   <div class="pn-row doppio">
  <label>Compenso Elisa (â‚¬)</label>

  <div class="pn-inline">
    <input type="number" id="cc-elisa" step="0.01">
    <input type="number" id="cc-bonus-elisa" step="0.01" placeholder="+ bonus">
  </div>
</div>



    <div class="pn-row totale">
      <label>Fondo cassa settimana successiva (â‚¬)</label>
      <input type="number" id="cc-fondo-cassa" step="0.01" readonly>
    </div>

    <footer class="pn-actions">
      <button id="btn-salva-chiusura" class="btn-primary">
        ğŸ’¾ Salva chiusura
      </button>
      <button id="btn-annulla-chiusura" class="btn-secondary">
        âŒ Annulla
      </button>
    </footer>

  </div>
</div>

<!-- ================= POPUP MESE ================= -->
<div id="popup-mese" class="popup hidden">
  <div class="popup-content">
    <header class="popup-header">
      <h2 id="titolo-mese"></h2>
      <button id="chiudi-popup-mese">âœ–</button>
    </header>

    <div class="sezione-mese">
  <h3>Settimane</h3>
  <div id="lista-settimane-mese"></div>
</div>

<div class="sezione-mese azioni-pdf">
  <button id="export-mese">ğŸ“„ Esporta mese</button>
  <button id="export-pdf-filtro">ğŸ“„ PDF filtrato</button>

</div>

<hr>

<div class="sezione-mese riepilogo-mese">
  <h3>Riepilogo mensile</h3>

  <p>ğŸ’¶ Totale Contanti: <strong id="mese-contanti">0.00</strong> â‚¬</p>
  <p>ğŸ’³ Totale POS: <strong id="mese-pos">0.00</strong> â‚¬</p>
  <p>ğŸ“¤ Totale Uscite: <strong id="mese-pagamenti">0.00</strong> â‚¬</p>
  <p class="saldo">
    ğŸ’° <strong>Saldo Contanti:</strong>
    <span id="mese-saldo">0.00</span> â‚¬
  </p>
</div>

  </div>
</div>

<!-- ================= POPUP MODIFICA ================= -->
<div id="popup-modifica" class="popup hidden">
  <div class="popup-content prima-nota">

    <header class="prima-nota-header">
      <h2 id="mod-titolo">Modifica movimento</h2>
      <button id="btn-chiudi-modifica">âœ–</button>
    </header>

    <input type="hidden" id="mod-id">

    <div class="pn-row">
      <label>Data</label>
      <input type="date" id="mod-data">
    </div>

    <div id="mod-entrata" class="pn-section hidden">
      <h3>Entrata</h3>
      <div class="pn-row">
        <label>Metodo</label>
        <select id="mod-metodo">
          <option value="contanti">ğŸ’¶ Contanti</option>
          <option value="pos">ğŸ’³ POS</option>
        </select>
      </div>
    </div>

    <div id="mod-uscita" class="pn-section hidden">
      <h3>Uscita</h3>

      <div class="pn-row">
        <label>Fornitore</label>
        <input type="text" id="mod-fornitore">
      </div>

      <div class="pn-row">
        <label>Documento</label>
        <select id="mod-documento">
          <option value="fattura">ğŸ“„ Fattura</option>
          <option value="scontrino">ğŸ§¾ Scontrino</option>
        </select>
      </div>

      <div class="pn-row">
        <label>Numero documento</label>
        <input type="text" id="mod-numero-documento">
      </div>
    </div>

    <div class="pn-row totale">
      <label>Importo (â‚¬)</label>
      <input type="number" id="mod-importo" step="0.01">
    </div>

    <footer class="pn-actions">
      <button id="btn-salva-modifica">ğŸ’¾ Salva</button>
      <button id="btn-annulla-modifica">âŒ Annulla</button>
    </footer>

  </div>
</div>

<!-- ================= HEADER ================= -->
<header class="header">
  <img src="img/logo.png" alt="Logo Bar" class="logo">
  <h1>Flussi di Cassa</h1>
</header>

<!-- ================= AZIONI HOME ================= -->
<div class="home-actions">

  <button
    id="btn-apri-agenda"
    class="btn-secondary">

    ğŸ“‹ Agenda

  </button>

  <button
    id="btn-nuovo-promemoria"
    class="btn-primary">

    ğŸ“… Nuovo Promemoria

  </button>

  <button
    id="btn-logout"
    class="btn-secondary">

    Esci

  </button>

</div>


<!-- ================= BANNER AGENDA ================= -->
<section class="card agenda-banner">

  <div class="agenda-banner-header">
    <h2>ğŸ“… Agenda</h2>
  </div>

  <div id="agenda-preview"></div>

</section>


<!-- ================= TASSE E IMPOSTE ================= -->
<section class="card">
  <h2>Tasse & Imposte</h2>
  <div class="azioni">
    <div class="box-azione tasse" id="btn-tasse">
      ğŸ›ï¸ Tasse & Imposte
    </div>
  </div>
</section>


<!-- ================= AZIONI ================= -->
<section class="card">
  <h2>Flussi di Cassa</h2>
  <div class="azioni">
    <div class="box-azione entrata" id="btn-entrata">â• Nuova Entrata</div>
    <div class="box-azione uscita" id="btn-uscita">â– Nuova Uscita</div>
  </div>
</section>

<!-- ================= FORM ENTRATA ================= -->
<section class="card hidden" id="form-entrata">
  <h2>Nuova Entrata</h2>
  <form id="form-entrata-dati">
    <input type="date" id="data-entrata" required>
    <div class="scelta-entrata">
      <button type="button" class="btn-metodo" data-metodo="contanti">ğŸ’¶ CONTANTI</button>
      <button type="button" class="btn-metodo" data-metodo="pos">ğŸ’³ POS</button>
    </div>
    <input type="number" id="importo-entrata" step="0.01" required>
    <button type="submit" class="btn-salva">ğŸ’¾ Salva Entrata</button>
  </form>
</section>

<!-- ================= FORM USCITA ================= -->
<section class="card hidden" id="form-uscita">
  <h2>Nuova Uscita</h2>
  <form id="form-uscita-dati">
    <input type="date" id="data-uscita" required>

    <input type="text" id="fornitore-input" list="lista-fornitori" placeholder="Nome fornitore" required>
    <datalist id="lista-fornitori"></datalist>

    <div class="scelta-documento">
      <button type="button" class="btn-doc" data-doc="fattura">ğŸ“„ FATTURA</button>
      <button type="button" class="btn-doc" data-doc="scontrino">ğŸ§¾ SCONTRINO</button>
    </div>

    <input type="text" id="numero-documento" placeholder="Numero documento">
    <input type="number" id="importo-uscita" step="0.01" required>

    <!-- QUOTE USCITA -->
    <div class="quote-uscita">
      <div class="quota-row">
        <label>Quota da contanti (â‚¬)</label>
        <input type="number" id="quota-contanti" step="0.01">
      </div>

      <div class="quota-row">
        <label>Quota da cassetto (â‚¬)</label>
        <input type="number" id="quota-cassetto" step="0.01" readonly>
      </div>
    </div>

    <button type="submit" class="btn-salva">ğŸ’¾ Salva Uscita</button>
  </form>
</section>

<!-- ================= RIEPILOGO SETTIMANA ================= -->
<section class="card">
  <h2>Riepilogo Settimana <span id="periodo-settimana"></span></h2>
  <button id="btn-dettaglio">ğŸ“‹ Dettaglio settimana</button>
  <button id="btn-chiusura-cassa">ğŸ”’ Chiusura cassa</button>

  <p>ğŸ’¶ Totale Contanti: <strong id="tot-contanti">0.00</strong> â‚¬</p>
  <p>ğŸ’³ Totale POS: <strong id="tot-pos">0.00</strong> â‚¬</p>
  <p>ğŸ“¤ Totale Pagamenti: <strong id="tot-pagamenti">0.00</strong> â‚¬</p>
  <hr>
  <p>ğŸ’° <strong>Saldo Contanti:</strong> <span id="saldo-contanti">0.00</span> â‚¬</p>
</section>

<!-- ================= ARCHIVIO MENSILE ================= -->
<section class="card">
  <h2>Archivio Mensile</h2>
  <div id="lista-mesi"></div>
</section>

</div>

<!-- ================= POPUP PDF FILTRATO ================= -->
<div id="popup-pdf-filtro" class="popup hidden">
  <div class="popup-content pdf-filtro">

    <header class="popup-header">
      <h2>PDF filtrato</h2>
      <button id="chiudi-pdf-filtro">âœ–</button>
    </header>

    <!-- ================= MESI ================= -->
    <h3>Mesi da analizzare</h3>
    <div id="pdf-mesi" class="box-grid">
      <!-- box mese generati via JS -->
    </div>

    <hr>

    <!-- ================= SEZIONI ================= -->
    <h3>Dati da includere</h3>
    <div id="pdf-sezioni" class="box-grid">
      <div class="box-toggle" data-sezione="contanti">Totale contanti</div>
      <div class="box-toggle" data-sezione="pos">Totale POS</div>
      <div class="box-toggle" data-sezione="uscite">Totale uscite</div>
      <div class="box-toggle" data-sezione="dettaglio-uscite">Dettaglio uscite</div>
      <div class="box-toggle" data-sezione="versamenti">Versamenti banca</div>
      <div class="box-toggle" data-sezione="lorenzo">Compenso Lorenzo</div>
      <div class="box-toggle" data-sezione="elisa">Compenso Elisa</div>
    </div>

    <hr>

    <!-- ================= FORNITORI ================= -->
    <div id="blocco-fornitori" class="hidden">
      <h3>Fornitori</h3>
      <div id="pdf-fornitori" class="box-grid">
        <!-- box fornitori generati via JS -->
      </div>
    </div>

    <footer class="pn-actions">
      <button id="btn-genera-pdf-filtro" class="btn-primary">
        ğŸ“„ Genera PDF
      </button>
    </footer>

  </div>
</div>



<!-- jsPDF (globale) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- jsPDF AutoTable -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>


<script src="auth.js" type="module"></script>
<script src="app.js" type="module"></script>


<!-- ================= BANNER TASSE IN SCADENZA ================= -->
<div id="banner-tasse" class="banner-tasse hidden">
  <h3>âš ï¸ Tasse da pagare</h3>
  <div id="lista-tasse-scadenza"></div>
</div>
<!-- ================= REGISTRI OBBLIGATORI ================= -->
<div id="box-registri" class="box-registri hidden">
  
  <div class="registro-card" id="btn-registro-temperature">
    <div class="registro-icon">ğŸŒ¡ï¸</div>
    <div class="registro-testo">
      <strong>Registro Temperature</strong>
      <span>Controllo giornaliero</span>
    </div>
  </div>

  <div class="registro-card" id="btn-registro-sanificazione">
    <div class="registro-icon">ğŸ§¼</div>
    <div class="registro-testo">
      <strong>Registro Sanificazione</strong>
      <span>Pulizie e igienizzazione</span>
    </div>
  </div>

</div>

</body>
</html>
