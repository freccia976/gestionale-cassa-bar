<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Gestionale Cassa Bar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ================= LOGIN ================= -->
<section class="card" id="login-box">
  <h2>Accesso</h2>
  <input type="email" id="login-email" placeholder="Email">
  <input type="password" id="login-password" placeholder="Password">
  <button id="btn-login">ğŸ” Entra</button>
</section>

<!-- ================= APP ================= -->
<div id="app" class="hidden">

<!-- POPUP DETTAGLIO SETTIMANA -->
<div id="popup-dettaglio" class="popup hidden">
  <div class="popup-content">
    <header class="popup-header">
      <h2>Dettaglio settimana <span id="popup-periodo"></span></h2>
      <button id="chiudi-popup">âœ–</button>
    </header>
    <ul id="lista-dettaglio"></ul>
  </div>
</div>

<!-- POPUP RIEPILOGO MENSILE -->
<div id="popup-mese" class="popup hidden">
  <div class="popup-content">
    <header class="popup-header">
      <h2 id="titolo-mese"></h2>
      <button id="chiudi-popup-mese">âœ–</button>
    </header>

    <div id="lista-settimane-mese"></div>

    <div class="azioni-pdf">
      <button id="export-mese">ğŸ“„ Esporta mese</button>
      <button id="export-settimana">ğŸ“„ Esporta settimana</button>
    </div>

    <hr>

    <p>ğŸ’¶ Totale Contanti: <strong id="mese-contanti">0.00</strong> â‚¬</p>
    <p>ğŸ’³ Totale POS: <strong id="mese-pos">0.00</strong> â‚¬</p>
    <p>ğŸ“¤ Totale Pagamenti: <strong id="mese-pagamenti">0.00</strong> â‚¬</p>
    <p>ğŸ’° <strong>Saldo Contanti:</strong> <span id="mese-saldo">0.00</span> â‚¬</p>
  </div>
</div>

<!-- HEADER -->
<header class="header">
  <img src="img/logo.png" alt="Logo Bar" class="logo">
  <h1>Flussi di Cassa</h1>
</header>

<!-- AZIONI -->
<section class="card">
  <h2>Flussi di Cassa</h2>
  <div class="azioni">
    <div class="box-azione entrata" id="btn-entrata">â• Nuova Entrata</div>
    <div class="box-azione uscita" id="btn-uscita">â– Nuova Uscita</div>
  </div>
</section>

<!-- FORM ENTRATA -->
<section class="card hidden" id="form-entrata">
  <h2>Nuova Entrata</h2>
  <form id="form-entrata-dati">
    <input type="date" id="data-entrata" required>
    <div class="scelta-entrata">
      <button type="button" class="btn-metodo" data-metodo="contanti">ğŸ’¶ CONTANTI</button>
      <button type="button" class="btn-metodo" data-metodo="pos">ğŸ’³ POS</button>
    </div>
    <input type="number" id="importo-entrata" placeholder="Importo â‚¬" step="0.01" required>
    <button type="submit" class="btn-salva">ğŸ’¾ Salva Entrata</button>
  </form>
</section>

<!-- FORM USCITA -->
<section class="card hidden" id="form-uscita">
  <h2>Nuova Uscita</h2>
  <form id="form-uscita-dati">
    <input type="date" id="data-uscita" required>
    <input type="text" id="fornitore-input" list="lista-fornitori" placeholder="Nome fornitore" required>
    <datalist id="lista-fornitori"></datalist>

    <div class="scelta-documento">
      <button type="button" class="btn-doc" data-doc="fattura">ğŸ“„ FATTURA</button>
      <button type="button" class="btn-doc" data-doc="scontrino">ğŸ§¾ SCONTRINO</button>
    </div>

    <input type="text" id="numero-documento" placeholder="Numero documento (opzionale)">
    <input type="number" id="importo-uscita" placeholder="Importo â‚¬" step="0.01" required>
    <button type="submit" class="btn-salva">ğŸ’¾ Salva Uscita</button>
  </form>
</section>

<!-- RIEPILOGO SETTIMANA -->
<section class="card">
  <h2>Riepilogo Settimana <span id="periodo-settimana" class="periodo-settimana"></span></h2>
  <button id="btn-dettaglio">ğŸ“‹ Dettaglio settimana</button>
  <p>ğŸ’¶ Totale Contanti: <strong id="tot-contanti">0.00</strong> â‚¬</p>
  <p>ğŸ’³ Totale POS: <strong id="tot-pos">0.00</strong> â‚¬</p>
  <p>ğŸ“¤ Totale Pagamenti: <strong id="tot-pagamenti">0.00</strong> â‚¬</p>
  <hr>
  <p>ğŸ’° <strong>Saldo Contanti:</strong> <span id="saldo-contanti">0.00</span> â‚¬</p>
</section>

<!-- ARCHIVIO MENSILE -->
<section class="card">
  <h2>Archivio Mensile</h2>
  <div id="lista-mesi"></div>
</section>

</div><!-- FINE APP -->

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- FIREBASE -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
  import { getAuth } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAuuwzai8Da1S9MsVmeQ78FdYFTffT6HSo",
    authDomain: "gestionale-cassa-bar.firebaseapp.com",
    projectId: "gestionale-cassa-bar",
    storageBucket: "gestionale-cassa-bar.firebasestorage.app",
    messagingSenderId: "680357723856",
    appId: "1:680357723856:web:4d84167fa82af2b395e8d5"
  };

  const app = initializeApp(firebaseConfig);
  window.firebaseAuth = getAuth(app);
  window.firebaseDB = getFirestore(app);
</script>
<script type="module" src="firebase-db.js"></script>
<script src="app.js" type="module"></script>

</body>
</html>


